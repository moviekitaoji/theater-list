/* --- 1. 核心變數設定 --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+TC:wght@500;900&display=swap');

:root {
    --main-gap: 24px;          /* 全域統一間距 (上下左右一致) */
    --card-min-width: 380px;   /* 卡片觸發換行的最小寬度 */
    --border-green: #238636;   /* 外框綠色 */
    --bg-dark: #0b0e14;        /* 背景深色 */
    --card-bg: #161b22;        /* 卡片背景 */
    --text-main: #e6edf3;      /* 主要文字 */
    --header-blue: #002d53;    /* 標題藍色 */
}

/* --- 2. 全域基礎設定 --- */
html { 
    border: 12px solid var(--border-green); 
    min-height: 100vh; 
    box-sizing: border-box; 
}

body { 
    background-color: var(--bg-dark); 
    color: var(--text-main); 
    font-family: 'Inter', 'Noto Sans TC', sans-serif; 
    margin: 0; 
    padding-bottom: 50px; 
}

/* --- 3. 標籤與狀態樣式 --- */
.status-badge { 
    width: 22px; height: 22px; 
    display: inline-flex; align-items: center; justify-content: center; 
    font-size: 10px; font-weight: 900; flex-shrink: 0; border-radius: 50%;
}
.badge-4k { background-color: #ffd700; color: #000; box-shadow: 0 0 10px rgba(255, 215, 0, 0.4); }
.badge-large { background-color: #484f58; color: #ffffff; font-size: 11px; }

.ratio-tag { font-weight: 680; font-size: 16px; min-width: 4px; text-align: center; }

/* --- 4. 網格容器佈局 --- */
#container {
    display: grid;
    gap: var(--main-gap); 
    align-items: start;
    width: 95%;
    max-width: 1800px; /* 限制超大螢幕時的延伸 */
    margin: 0 auto;    /* 置中 */
}

/* 垂直欄位容器：確保卡片上下銜接無空格 */
.column-group {
    display: flex;
    flex-direction: column;
    gap: var(--main-gap); /* 上下間距與 Grid 左右間距同步 */
    width: 100%;
}

/* --- 階段 A：超寬螢幕 (1600px 以上) --- */
/* 佈局：3 欄，比例 2:1:1 (數位4K卡片最寬) */
@media (min-width: 1600px) {
    #container { 
        grid-template-columns: 2fr 1fr 1fr; 
    }
    .col-group-4k { order: 1; }
    .col-group-main { order: 2; }
    .col-group-side { order: 3; }
    
    /* 數位4K內部清單：雙直排 (先上下後左右) */
    .flow-column-2 { 
        column-count: 2; 
        column-gap: 32px; 
    }
}

/* --- 階段 B：中等螢幕 (1200px ~ 1599px) --- */
/* 佈局：3 欄，比例 1:1:1 (等寬) */
@media (min-width: 1200px) and (max-width: 1599px) {
    #container { 
        grid-template-columns: 1fr 1fr 1fr; 
    }
    .col-group-4k { order: 1; }
    .col-group-main { order: 2; }
    .col-group-side { order: 3; }
    
    /* 此時卡片變窄，4K 內部改為單排防止擠壓 */
    .flow-column-2 { column-count: 1; }
}

/* --- 階段 C：小螢幕/平板 (785px ~ 1199px) --- */
/* 佈局：2 欄，數位4K移動到下方並橫跨 2 欄 */
@media (min-width: 785px) and (max-width: 1199px) {
    #container { 
        grid-template-columns: 1fr 1fr; 
    }
    .col-group-4k { 
        grid-column: span 2; 
        order: 3; /* 移到底部 */
    }
    .col-group-main { order: 1; }
    .col-group-side { order: 2; }
    
    /* 4K 卡片變寬了，恢復雙排顯示 */
    .flow-column-2 { column-count: 2; column-gap: 32px; }
}

/* --- 階段 D：手機版 (784px 以下) --- */
/* 佈局：1 欄，所有內容垂直排列 */
@media (max-width: 784px) {
    #container { 
        grid-template-columns: 1fr;
    }
    /* 隱形容器讓裡面卡片直接参与排序 */
    .column-group { display: contents; } 

    /* 手機版指定排序：IMAX 第一、4K 最後 */
    .card-imax { order: 1; }
    .card-dolby { order: 2; }
    .card-cj { order: 3; }
    .card-media { order: 4; }
    .card-dbox { order: 5; }
    .card-4k { order: 6; }

    .flow-column-2 { column-count: 1; }
}

/* --- 5. 卡片細部組件樣式 --- */
.category-card { 
    border: 3px solid; 
    background: var(--card-bg); 
    border-radius: 14px; 
    padding: 20px; 
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    width: 100%;
    box-sizing: border-box;
}

.subgroup-box {
    break-inside: avoid; /* 防止內容在雙欄模式下被切斷 */
    margin-bottom: 1.5rem;
}

.category-card li {
    break-inside: avoid;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 14px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    padding-bottom: 6px;
    margin-bottom: 6px;
}

/* --- 6. 頁面裝飾元件 --- */
.header-blue-bg {
    background-color: var(--header-blue); 
    padding: 60px 20px;
    margin-bottom: 40px;
    text-align: center;
}

.filter-checkbox { accent-color: var(--border-green); width: 18px; height: 18px; cursor: pointer; }

/* 右下角社群浮動按鈕 */
.social-float {
    position: fixed;
    bottom: 30px;
    right: 30px;
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(22, 27, 34, 0.9);
    padding: 10px 20px;
    border-radius: 50px;
    border: 1px solid #30363d;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    z-index: 100;
}
.social-float a { color: var(--text-main); font-size: 22px; transition: 0.2s; }
.social-float a:hover { transform: scale(1.2); color: #58a6ff; }
.social-info {
    border-left: 1px solid #30363d;
    padding-left: 12px;
    font-size: 12px;
    color: #8b949e;
    line-height: 1.2;
}

/* 頁尾比例說明圖例 */
#ratio-legend span {
    background-color: #1c2128;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 11px;
    border: 1px solid #30363d;
}